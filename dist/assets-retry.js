var assetsRetry=function(){"use strict";function n(t){return t}function f(){}var p="retryTimes",m="succeeded",b="failed",E="maxRetryCount",o="onRetry",i="onFail",a="domain",w="data-assets-retry-hooked",L="data-assets-retry-ignore",d="data-retry-id",c=window,l=window.document,e=c.HTMLElement,M=c.HTMLScriptElement,r=c.HTMLLinkElement,s=c.HTMLImageElement,T=function(t,e,r){var n=t.indexOf(e);return-1===n?t:t.substring(0,n)+r+t.substring(n+e.length)},A=function(e,t,r,n){void 0===r&&(r=f),void 0===n&&(n=!1);var o,i,a,c,s,u=n||e.defer||e.async;"loading"!==l.readyState||/Edge|MSIE|rv:/i.test(navigator.userAgent)||u?(o=l.createElement("script"),Object.keys(M.prototype).forEach(function(t){if("src"!==t&&e[t]&&"object"!=typeof e[t])try{o[t]=e[t]}catch(t){}}),o.src=t,o.onload=e.onload,o.onerror=e.onerror,o.setAttribute(d,g()),(i=e.getAttribute("nonce"))&&o.setAttribute("nonce",i),l.getElementsByTagName("head")[0].appendChild(o)):(a=g(),c=e.outerHTML.replace(/data-retry-id="[^"]+"/,"").replace(/src=(?:"[^"]+"|.+)([ >])/,d+"="+a+' src="'+t+'"$1'),l.write(c),(s=l.querySelector("script["+d+'="'+a+'"]'))&&(s.onload=r))},j=function(t){return t?t instanceof e?[t.nodeName,t.src,t.href,t.getAttribute(d)].join(";"):"not_supported":"null"},g=function(){return Math.random().toString(36).slice(2)},H=function(t){return t instanceof M||t instanceof s?t.src:t instanceof r?t.href:null},u={},O=function(t,e){var r,n=R(t,e),o=n[0],i=n[1];return o?(u[o]=u[o]||((r={})[p]=0,r[b]=[],r[m]=[],r),[i,u[o]]):[]},R=function(t,e){var r,n,o,i,a=(r=t,n=e,Object.keys(n).filter(function(t){return-1<r.indexOf(t)}).sort(function(t,e){return e.length-t.length})[0]);return a?[(i=a,(o=t).substr(o.indexOf(i)+i.length,o.length)),a]:[t,""]},S={};return function(t){var e,g,y,h,v;void 0===t&&(t={});try{if("object"!=typeof t[a])throw new Error("opts.domain cannot be non-object.");var r=((e={})[E]=t[E]||3,e[o]=t[o]||n,e[i]=t[i]||f,e[a]=t[a],e);return y=(g=r)[o],h=g[i],v=g[a],l.addEventListener("error",function(t){if(t){var e=t.target||t.srcElement,r=H(e);if(r){var n=O(r,v),o=n[0],i=n[1],a=e instanceof HTMLElement&&e.hasAttribute(L);if(i&&o&&!a){i[p]++,i[b].push(r);var c,s=i[p]>g[E];if(s&&(c=R(r,v)[0],h(c)),v[o]&&!s){var u=v[o],f=T(r,o,u),d=y(f,r,i);if(null!==d){if("string"!=typeof d)throw new Error("a string should be returned in `onRetry` function");var l=j(e);S[l]||(S[l]=!0,e instanceof M&&!e.getAttribute(w)&&e.src&&A(e,d,function(){i[m].push(d)}))}}}}}},!0),u}catch(t){c.console&&console.error("[assetsRetry] error captured",t)}}}();
